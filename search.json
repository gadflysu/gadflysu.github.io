                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                [{"title":"正则表达式","date":"2019-07-11T16:00:00.000Z","url":"/general/regular-expression/","tags":["string","pattern matching","grep","sed","awk"],"categories":["general"],"content":"正则表达式 (Regular Expression, regex, regexp) 使用单个字符串来描述、匹配一系列符合某个句法规则的字符串。  A regular expression is a pattern that describes a set of strings. 常用的工具 grep 中的「re」就是指正则表达式，Ken Thompson 在 44 年前 (Nov. 1974) 将此符号系统引入 grep。正则表达式的 POSIX 规范，分为基本型正则表达式 (Basic Regular Expression, BRE) 和扩展型正则表达式 (Extended Regular Express, ERE)。顾名思义，后者会更强大。在 GNU 实现的 grep 中，基本语法和扩展语法的可用功能没有区别。Perl 兼容正则表达式 (Perl Compatible Regular Expressions, PCRE) 支持更多的功能，它是由 Philip Hazel 在上个世纪末 (1997) 开发的一个正则表达式引擎，实现与 Perl 5 一致的语法和语义，被用于许多现代的著名项目，如 Apache、PHP、KDE、Postfix、Nmap 以及 Apple Safari。基本结构我们暂且不管形式语言、自动机之类的理论，先来看一个简单的例子：hello*。这个正则表达式是含有 6 个字符的字符串，它匹配 hello、helloo 以及 hellooo 等等无穷多个以「hello」开头、后接 0 个或多个「o」的字符串。正则表达式的基本结构是匹配一个字符的模式 (pattern)。大部分普通的字符，包括所有的字母和数字，都匹配它们自身，如 h 匹配 h、e 匹配 e。一些有特殊功能的字符，如上例中表示匹配前面的子表达式 (o) 任意次的 *，叫作元字符 (meta-character)。若要匹配元字符自身，则需要一个前缀的反斜杠 (\\, backslash) 进行转义 (escape)，如 \\* 匹配一个星号 (*, asterisk)。元字符有：^ $ ( ) * + ? . [ \\ { |。句点 . 是元字符，匹配除回车符 (carriage return, CR) 和换行符 (newline / line feed, LF) 之外的任意的单字符。例如，w.ll 能匹配 will 和 well。一个正则表达式可后接像 * 这样的表达式，表示重复操作 (repetition)。详见下表：表达式描述*匹配前面的子表达式 0 次或更多次。?匹配前面的子表达式 0 次或 1 次。+匹配前面的子表达式 1 次或更多次。{n}匹配前面的子表达式恰好 n 次。{n,}匹配前面的子表达式至少 n 次。{n,m}匹配前面的子表达式至少 n 次、至多 m 次。从上表可见重复操作不一定由单个字符完成，更复杂的操作可能需要成对出现的花括号 ({ &amp; }, curly braces) 以及数字。* 等价于 {0,}，? 等价于 {0,1}，+ 等价于 {1,}。此外 GNU grep 中还支持 {,m}，表示匹配至多 m 次，这是 GNU 的扩展 (extension)。两个正则表达式可以直接连接，表示串接操作 (concatenation)，其结果匹配任何由分别匹配原表达式的字符串串接而得的字符串。为了表达得严谨些，看起来有点绕，举个例子来看就会很简单：正则表达式 a 和 b 串接的结果 ab，匹配由字符串 a 和 b 串接而得的字符串 ab。显然，这种操作是基本而广泛的。两个正则表达式可以用竖线符 | 连接起来，表示选择操作 (alternation)，其结果匹配两个表达式中的任意一个。举个例子：a|b 匹配 a 或 b。（没错，这和或运算 (or) 的中缀表示法一致。）重复操作优先于串接操作，串接操作优先于选择操作。例如，hi* 能匹配 hii 而不能匹配 hihi，fuc|nk 能匹配 fuc 而不能匹配 funk。整个表达式可以使用圆括号 (( &amp; ), parentheses) 括起来，形成一个新的子表达式 (subexpression)，其优先级比前述三种操作都更高。例如，(hi)* 能匹配 hihi，fu(c|n)k 能匹配 funk。空的正则表达式匹配空字符串 。方括号表达式与字符类除了前文介绍的花括号和圆括号，还有一种常见的括号——方括号 ([ &amp; ], (square) brackets)。 由方括号括起来的一系列字符叫作方括号表达式 (bracket expression)，匹配方括号内字符序列中的任意一个字符。例如，[fox] 匹配 f、o 或者 x，等价于 f|o|x。若序列中第一个字符为脱字符 (^, caret)，则匹配排除序列中字符的任何字符。例如，[^cat] 则无法匹配 c、a 或 t 但能匹配 d、0 或 g 等等。方括号内仍有特殊功能的元字符仅余用于转义的反斜杠 \\ 以及在第一位的脱字符 ^。例如，[(fu)*k] 能匹配 (、f、u、)、* 或者 k。在方括号表达式中，由两个字符及其之间的连字符 (-, hyphen) 组成的字符串叫作字符范围表达式 (range expression)，匹配在字符集中处于这两个字符之间范围的任意一个字符。还是举例子比较简单，对于一般的字符编码，[a-z] 匹配任意一个小写字母，[0-9] 匹配一位阿拉伯数字。所以，[A-D] 等价于 [ABCD] 即 A|B|C|D。此外，方括号表达式中预定义了一些命名字符类 (named character class)，表示一系列特定的字符。详见下表：类名描述[:lower:]小写字母字符，同 [a-z][:upper:]大写字母字符，同 [A-Z][:alpha:]字母字符，即 [:lower:] 和 [:upper:]，同 [A-Za-z][:digit:]数字字符，同 [0-9][:xdigit:]十六进制数字字符，同 [A-Fa-f0-9][:alnum:]字母和数字字符，即 [:alpha:] 和 [:digit:]，同 [0-9A-Za-z][:blank:]空白符，指空格 (space, SP) 和制表符 (horizontal tab, HT)，同 [ \\t][:space:]空格符，指制表符 (HT)、换行符 (LF)、垂直制表符 (vertical tab, VT)、换页符 (form feed, FF)、回车符 (CR) 和空格 (SP)[:punct:]标点字符，有：! &quot; # $ % &amp; &#39; ( ) * + , - . / : ; &lt; = &gt; ? @ [ \\ ] ^ _ &#x60; { &#x7C; } ~[:graph:]有形字符，即 [:alnum:] 和 [:punct:][:print:]可打印字符，即 [:alnum:]、[:punct:] 和空格 (SP)[:cntrl:]控制字符，在 ASCII 中指从十进制的 0 到 37，以及 177 (DEL)注意上表首列中的中括号是类名的一部分，含有命名符号类的正则表达式应该形如 [[:name:]]。例如，正则表达式 [[:lower:]01] 匹配所有小写字母，以及两个数字 0、1。这里提及一个有趣的问题：我们知道 [[:digit:]] 等价于 [0-9]，那么如何写一个等价的一般的方括号表达式以在 shell 中使用 GNU grep 匹配 [:punct:] 这样一个复杂的符号类？这个问题主要是将有特殊功能的字符表示为普通字符，涉及 shell 中的引号使用以及中括号内的字符顺序。答案是：我们在 shell 中通常用单引号来引用正则表达式，因为单引号最大限度地避免扩展 (expansion)，保留特殊字符的字面值 (literal value)，如 $ 仅仅是美元符 (dollar sign) 而非变量标志。前文说方括号内的元字符并未提到方括号 ([ &amp; ])，也就是说 [[] 匹配左方括号，[]] 匹配右方括号。这是没错的，虽然看起来有点不合常理的机智，因为一般而言 ] 不是标志着这个子表达式的终结吗？——类似于「在第一位的 ^ 代表排除式内字符」的规定，特别地，方括号内在第一位的 ] 匹配自身，而非结束方括号表达式。所以若要匹配 ]，必须将它放在第一位；正如若要匹配 ^，不得将它放在第一位。除此二之外，更多规则详见下表：模式描述[.表示 collating symbol 的开始.]表示 collating symbol 的结束[=表示 equivalence class 的开始=]表示 equivalence class 的结束[:表示命名字符类的开始，后跟有效类名:]表示命名字符类的结束-表示字符范围，当在非首位且非末位时 匹配空串的特殊表达式反斜杠符 \\ 作为转义字符（港台称「跳脫字元」），后跟一些特定的字符，表示一些特殊的模式匹配。模式描述\\b匹配单词边缘的空字符串\\B匹配非单词边缘的空字符串\\&lt;匹配单词开头位置的空字符串\\&gt;匹配单词末尾位置的空字符串\\w匹配单词成分，等价于 [_[:alnum:]]\\W匹配非单词成分，等价于 [^_[:alnum:]]\\s匹配空白符，等价于 [[:space:]]\\S匹配非空白符，等价于 [^[:space:]]其中「单词边缘」？「空字符串」？不太好理解。举个例子，字符串 self-censorship 的每对相邻字符 (eg. s e)之间以及第一个 s 的左边、末尾 p 的右边的位置上，可以看作存在一个（或任意个）「空字符串」。那么位于第一个 s 和 c 的左边、f 和 p 的右边，也就是「单词边缘」的位置上的那个空串，能够由 \\b 匹配。于是 \\bs. 能匹配该串中的 se 而不匹配 so 或 sh。所谓单词边缘就是指一个其左右两个字符一个属于单词成分 (\\w)、一个不属于单词成分的位置。于是不难理解 \\B、\\&lt; 和 \\&gt; 应匹配什么位置的空串。匹配特定空串实际上就是匹配位置。脱字符 ^ 匹配行首的空串，美元符 $ 匹配行末的空串。这两个字符被称为锚 (anchor)，因为它们分别被锚定到行首和行末。例如，一文本文件有如下字符：则 ^H.p 匹配该行内的 Hip，H.p$ 匹配该行内的 Hop。反向引用与子表达式反向引用 (back-reference) 的语法为 \\n，其中 n 是一位数字。\\n 引用了正则表达式中第 n 个由圆括号形成的子表达式 (parenthesized subexpression)。例如，(f)\\1 相当于 (f)(f)，匹配 ff。当被引用的子表达式被用于选择操作 (|) 中，假如该子表达式所在的部分不参与匹配，则整个匹配失败。例如，a(.)|b\\1 无法匹配 ba。GNU grep 给出的错误是「Invalid back reference」。当有多个正则表达式进行匹配（比如 grep 使用 -e &lt;PATTERN&gt; 或 -f &lt;FILE&gt; 参数）时，向后引用的编号 (n) 是对于每一个正则表达式而言的。以上是「正则表达式」的基本内容。[Ref] GNU grep docs"},{"title":"在 Ubuntu 安装与配置 MariaDB","date":"2019-03-17T16:00:00.000Z","url":"/database/mariadb-on-ubuntu/","tags":["mariadb","mysql","linux","ubuntu","primer"],"categories":["database"],"content":"MariaDB 是流行的关系型数据库管理系统 (RDBMS)，其著名用户有 Wikipedia、WordPress.com 和 Google。在 2009 年 Oracle 收购 Sun Microsystems 之后，后者旗下的开源数据库系统 MySQL 自然归属于（臭名昭著的）Oracle。为规避潜在的闭源风险，MySQL 的创始人 Michael Widenius 及原开发团队创建了一个保证开源的新分支——MariaDB。安装MariaDB 可以从 Ubuntu 的官方软件源安装：从前文的背景简述可知，MariaDB 兼容 MySQL，毕竟……/usr/bin/mariadb 就是 /usr/bin/mysql 的软链接。要检查软件版本，执行：本文将在上示环境和软件版本下进行。启动 MariaDB 服务：安全配置安装完成后建议首先用软件自带的一个脚本执行初始的安全配置：注意使用 sudo 以获取 root 权限来执行，这是因为 MariaDB 的默认用户 root 采用 unix_socket 插件进行鉴权（这一点会在后面提到），而执行安全配置需要登录。root 默认密码为空，按下「Enter」键即可。接下来设置你的 root 用户密码（注意没有回显）：MariaDB 默认有一个允许任何人登录的匿名用户，方便测试或者初次安装配置（例如后文会讲的用户配置），在生产环境下建议删除之：root 用户一般应该仅允许从本地登录，禁止远程连接：MariaDB 默认有一个允许任何人访问的数据库 (test)，在生产环境下建议删除之：最后重载权限表以应用上面所做的变更：创建用户经过安装和简单的初始配置之后，我们来尝试连接到 MariaDB server 看看，直接执行：此时会遇到错误：看起来是访问权限的问题：以 root 用户从本地尝试访问被拒绝。我们在前面的配置中已经删除了匿名用户，现在 MariaDB 只有一个 root 用户；而我当前系统登录用户并非 root——其实数据库系统的用户和操作系统的用户显然是两回事，两者有什么关系呢？参考 Stack Overflow 的一个问答，MySQL 在一些系统（比如 Ubuntu）默认使用 unix_socket 插件，依赖系统用户凭证进行鉴权。官方文档讲，这个插件发布于 MariaDB 5.2.0，从 MariaDB 10.4.3 开始默认启用。unix_socket 允许用户通过本地的 Unix socket 文件使用系统凭证登录到 MariaDB Server。此插件通过系统调用可以获取连接到 socket 的进程 uid，进而得到与其关联的用户名，然后会将连接用户作为具有相同用户名的 MariaDB 用户进行身份验证。简单的理解大概是，MariaDB 现在是通过系统用户来登录的，那么就要求 MariaDB 有一个同名用户。我们来看看 MariaDB 现在的用户配置：虽然也可以修改插件配置，但是这里我仍然建议创建一个同名的数据库用户：其中 YOUR_SYSTEM_USER 是你的用户名。至此就可以开始顺利地玩耍了。"},{"title":"为 Ubuntu LTS 安装 HWE 以获取更新的内核与图形支持","date":"2019-03-05T16:00:00.000Z","url":"/linux/ubuntu-install-hwe-for-newer-kernel-and-x-support/","tags":["ubuntu","software","hwe"],"categories":["linux"],"content":"本文是一份提示。TL;DR:原计划于今年 2 月 7 日发布的 Ubuntu 18.04.2 LTS 因 Linux 4.18 内核的一个 bug 推延至 2 月 14 日。（放送旧闻？）Ubuntu 18.04.2 LTS 最终伴随着来自 18.10 的内核与图形更新以及其他安全补丁和 bug 修复得以正式发布。此外，Ubuntu 18.04 的生命周期从五年延长至十年，这是 Ubuntu 创始人 Mark Shuttleworth 在去年 11 月的 OpenStack Summit 上宣布的。Ubuntu LTS enablement（也叫 HWE 或 Hardware Enablement）stacks 用于支持不断更新的硬件技术，能够为现存的 Ubuntu LTS 提供更新的内核与图形支持，适用于桌面版、服务器版甚至 Cloud 版和虚拟镜像。HWE Stacks (i.e. HWE Kernel + X Stack) 随 LTS 的小版本更新（point release，比如最近的 18.04.2）发布，当通过媒介安装新版 Ubuntu LTS 时，HWE 会一并安装，对于正在运行的系统则需要手动安装。为了减轻维护团队的负担，HWE 采用滚动更新的模式。LTS 的第五个（即最后一个）小版本更新时，用户将被要求升级至最后一个 HWE stack 以保留安全更新和 bug 修复的支持。安装 HWE 只需要执行： 下面是我的安装记录，显示了一些实际即将安装的和移除的包：[Ref] Softpedia news, It’s F.O.S.S news, Ubuntu wiki LTSEnablementStack &amp; RollingLTSEnablementStack"},{"title":"二〇一八，以末为始","date":"2018-12-30T16:00:00.000Z","url":"/life/the-end-of-2018/","categories":["life"],"content":"                                              var ap = new APlayer({            element: document.getElementById(\"aplayer-hmgFhgUe\"),            narrow: false,            autoplay: true,            showlrc: 2,            music: {              title: \"浪流連\",              author: \"茄子蛋\",              url: \"EggPlantEgg-WavesWandering.mp3\",              pic: \"/life/the-end-of-2018/EggPlantEgg-WavesWandering.jpg\",              lrc: \"EggPlantEgg-WavesWandering.lrc\"            }          });          window.aplayers || (window.aplayers = []);          window.aplayers.push(ap);        今天醒来已是午后，一如今年混乱的生活习惯。摸到床边的眼镜戴上，神志不清地打开手机，漫无目的地划动浏览。严冬的阳光从窗外射进晦暗的寝室里，渐渐终于能回过神，知道我在何处要做什么事。二〇一八年，没了。这是我第一篇公开发布的博客，是对自己的一年来浪荡歧途的审视和反省，以末为始。我自满于雕虫小技先说代码，主要时间用于算法题目训练，代码写得最多还是 C，最多混乱地用用 C++ Standard Library 几个简单的类以简化代码，Java 不能算入门。其次说习惯，主要工作平台切换到 Ubuntu 18.04 LTS，熟悉 Linux 的一些常用命令，简单地接触 Shell，还不会写脚本，就把命令按序写入文件当作快捷方式用 (😅)，另外也算能自己应对各种意外错误，依靠网络自行解决问题，可以沉着（不慌）面对英语文档。ACM 生涯结束以后，主要兴趣转向 Web，尽管至今仍相信这不会是我将来的工作领域。遗憾的是，自认为至今仅仅零散地见识了一些基础的技术应用，算是入门水平吧。总之，我仍然无法专注于某项技术深入学习。我兴趣广泛，但时间的限制令我浅尝辄止，我喜欢折腾，我明白基础知识的重要性，却仍执迷于环境和工具配置。我自满于雕虫小技，我浪费珍贵的精力用于那些无益于我技术前途的东西，这是一种短见和贪婪。我的青春结束了这是宣言，于 11 月 15 日 22:32 在 Telegram 的私人频道发出。10 月 28 日我到徐州参加亚洲区域赛，是我的第一场比赛，也是最后一场。无牌退役，是「结束」的标志。我眼睁睁看着自己的生命力丧失了，对此我当然会反抗，但无法否认这个现实。我二十了。回不去了，就努力长大吧。我还是喜欢哭下半年哭的次数多了，我很愿意如此，小标题的「喜欢」真不是平常人们言下「习惯」之意，而是由衷的。说说印象深刻的几次。一次是在对杨的倾诉，我当时陷入无底的悲哀，执迷于自我之究竟，我是逼着自己流出泪水的。一次也是面对杨，是突如其来的自我检查和陈述，说着说着，把自己说哭了。弄哭我的是自己，我恐惧时间、恐惧成长、恐惧变化，我恐惧面对自己。许多次是为了杨超越，这个我有幸于夏天认识的平凡却不普通的少女，为其遭受的责难和暴力、为其所得的自信与荣耀，我感动于赤诚纯粹的心。几次是看《你好，旧时光》，我喜欢生动的青春、单纯的情愫，我喜欢他们的有血有肉、勇敢仗义。青春里每个人都是主角。我愿彼时我会如小越在日记总所言一般——「可是呢，我到现在还是没有改哈哈哈哈」。我扔弃了社交人生最无谓最浪费的就是人事。我和一个朋友绝交，我疏远了才交好的室友，我切断了可有可无的社交联系。我可以接受只有一两个好友，我不愿意再嬉皮笑脸地面对我根本不在乎的人事，我不会主动对迎面走来的人们打招呼，我不想再给那些来去无由的人们任何多余的眼神。既然我信随机混乱的世界观，我就接受世俗所谓之「缘分」。当你朋友意味着不要也罢。社交这种事，我本就不擅长便也不想花力气去努力了。我没有明确的目标我有想做的事，我没有计划，也没有明确的目标。我自以为当初比同龄人清醒，走到今天反而越发糊涂和迷茫。不知所为，不知所向。我的明天零点是二〇一八的终结。以末为始，我会一无所有失无可失地出发，我会勇敢且诚恳地大步往前走。我相信明天会更好，我会更快乐。万事胜意。"},{"title":"捐赠","date":"2019-04-17T16:00:00.000Z","url":"/donate/index.html","content":"如果你喜欢我的作品、觉得它们对你有帮助，就请我喝杯咖啡吧！If you like my works and think they’re helpful, feel free to buy me a coffee!PayPalPatreonBuy Me A Coffee"},{"title":"About gadflysu","date":"2019-07-05T21:08:42.883Z","url":"/about/index.html","content":"🌏 Language: 中文 / English👨‍🎓 Major: Software Engineering💻 Laptop: OMEN by HP Laptop PC - 15-ax018tx (2016)📱 Mobile Phone: Apple iPhone SE (Space Gray) (2018) / Google Nexus 5X (2016)🖥 Desktop OS: Ubuntu 18.04 LTS Bionic☁️ Server OS: CentOS 7 Ubuntu 18.04 LTS Bionic🐚 Shell: Zsh (with Oh My Zsh)📝 Editor: Sublime Text 3👨‍💻 Indentation: 4 Spaces🏥 Against “996” working system🇭🇰 Stand with Hong Kong🏳️‍🌈 Believe “Love is Love”"},{"title":"Gallery","date":"2019-07-13T17:03:32.975Z","url":"/gallery/index.html"},{"title":"Links","date":"2019-07-13T18:05:25.277Z","url":"/links/index.html"},{"title":"产品推荐","date":"2019-04-13T16:00:00.000Z","url":"/recommendation/index.html","content":"BandwagonHostBandwagonHost 是著名的虚拟专用服务器厂商。本站即运行于其服务器中。点击「这里」购买 BandwagonHost 的 VPS，我可以获得 22% 的返利。Vultr[Special] 点击「这里」成为 Vultr 的新用户并保持活跃 30+ 天、完成至少 $25 的订单，则你可以获得 $50 的 Vultr 额度，我可以获得 $25 的返利。Vultr 是著名的云服务商。点击「这里」成为 Vultr 的新用户并保持活跃 30+ 天、完成至少 $10 的订单，则我可以获得 $10 的返利。DropboxDropbox 是著名的在线文件同步服务，可在多设备间快速同步文件，轻松分享文件或文件夹，恢复和还原已删除的文件和文件夹。点击「这里」成为 Dropbox 用户并安装软件。OneDriveOneDrive 是微软运营的在线文件存储服务。点击「这里」成为 OneDrive 新用户，你和我均可获得额外的 0.5 GB 存储空间。TeraCLOUDTeraCLOUD 是日本的一家在线文件存储服务，支持 WebDAV。点击「这里」注册并登录之后，在 Mypage 填写我的介绍代码 5S6CR，你可以获得额外的无限期的 5 GB 存储空间。"},{"title":"Search","date":"2019-07-13T17:08:01.887Z","url":"/search/index.html"},{"title":"Blog Tags","date":"2019-07-13T16:59:53.747Z","url":"/tags/index.html"},{"title":"timeline","date":"2019-06-29T13:11:52.649Z","url":"/timeline/index.html"}]